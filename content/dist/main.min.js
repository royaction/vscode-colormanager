var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var k=0;return function(){return k<c.length?{done:!1,value:c[k++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.makeIterator=function(c){var k="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return k?k.call(c):$jscomp.arrayIterator(c)};
$jscomp.checkStringArgs=function(c,k,q){if(null==c)throw new TypeError("The 'this' value for String.prototype."+q+" must not be null or undefined");if(k instanceof RegExp)throw new TypeError("First argument to String.prototype."+q+" must not be a regular expression");return c+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,k,q){c!=Array.prototype&&c!=Object.prototype&&(c[k]=q.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,k,q,p){if(k){q=$jscomp.global;c=c.split(".");for(p=0;p<c.length-1;p++){var t=c[p];t in q||(q[t]={});q=q[t]}c=c[c.length-1];p=q[c];k=k(p);k!=p&&null!=k&&$jscomp.defineProperty(q,c,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(c){var k=$jscomp.checkStringArgs(this,null,"repeat");if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var p="";c;)if(c&1&&(p+=k),c>>>=1)k+=k;return p}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var c=0;return function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+c++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.iteratorFromArray=function(c,k){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var q=0,p={next:function(){if(q<c.length){var t=q++;return{value:k(t,c[t]),done:!1}}p.next=function(){return{done:!0,value:void 0}};return p.next()}};p[Symbol.iterator]=function(){return p};return p};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.findInternal=function(c,k,q){c instanceof String&&(c=String(c));for(var p=c.length,t=0;t<p;t++){var X=c[t];if(k.call(q,X,t,c))return{i:t,v:X}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,q){return $jscomp.findInternal(this,c,q).v}},"es6","es3");
(function(){var c=this,k=function(a){var d=a[0]/255,b=a[1]/255,c=a[2]/255,C=Math.min(d,b,c),e=Math.max(d,b,c),g=(e+C)/2;if(e===C)var u=C=0;else{var x=e-C;C=.5<g?x/(2-e-C):x/(e+C);switch(e){case d:u=(b-c)/x+(b<c?6:0);break;case b:u=(c-d)/x+2;break;case c:u=(d-b)/x+4}u/=6}return 3===a.length?[Math.round(360*u),Math.round(100*C),Math.round(100*g)]:[Math.round(360*u),Math.round(100*C),Math.round(100*g),a[3]]},q=function(a){var d=a[0]/360,b=a[1]/100,c=a[2]/100,e=0,g=0,h=0;0===b?e=g=h=c:(h=function(a,d,
b){0>b&&(b+=1);1<b&&--b;return b<1/6?a+6*(d-a)*b:.5>b?d:b<2/3?a+(d-a)*(2/3-b)*6:a},b=.5>c?c*(1+b):c+b-c*b,c=2*c-b,e=h(c,b,d+1/3),g=h(c,b,d),h=h(c,b,d-1/3));return 3===a.length?[Math.round(255*e),Math.round(255*g),Math.round(255*h)]:[Math.round(255*e),Math.round(255*g),Math.round(255*h),a[3]]},p=function(a){a=a.replace(/\s/g,"").split(",");var d=parseInt(a[0].substr(a[0].indexOf("(")+1,a[0].length)),b=parseInt(a[1]),c=parseInt(a[2]);return 4===a.length?[d,b,c,parseFloat(a[3].slice(0,-1))]:[d,b,c]},
t=function(a,b){return"hsl"===b?3===a.length?b+"("+a[0]+", "+a[1]+"%, "+a[2]+"%)":b+"a("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+a[3]+")":3===a.length?b+"("+a[0]+", "+a[1]+", "+a[2]+")":b+"a("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},X=function(a){a=a.slice(a.indexOf("(",0)+1,a.lastIndexOf(")")).split(",");var b=(a[0]|256).toString(16).slice(1)+(a[1]|256).toString(16).slice(1)+(a[2]|256).toString(16).slice(1);return 3===a.length?"#"+b:"#"+b+(Math.round(255*a[3])+65536).toString(16).substr(-2)},M=function(a,
b){4===a.length?a=la(a,36):5===a.length&&(a=la(a,48));var d=parseInt(a.substring(1,3),16),n=parseInt(a.substring(3,5),16),c=parseInt(a.substring(5,7),16),e=!1;9===a.length&&(e=parseFloat((parseInt(a.substring(7,9),16)/255).toFixed(2)));return!0===b?!1===e?"rgb("+d+", "+n+", "+c+")":"rgba("+d+", "+n+", "+c+", "+e+")":!1===e?[d,n,c]:[d,n,c,e]},ma={AliceBlue:"#f0f8ff",AntiqueWhite:"#faebd7",Aqua:"#00ffff",AquaMarine:"#7fffd4",Azure:"#f0ffff",Beige:"#f5f5dc",Bisque:"#ffe4c4",Black:"#000000",BlanchedAlmond:"#ffebcd",
Blue:"#0000ff",BlueViolet:"#8a2be2",Brown:"#a52a2a",Burlywood:"#deb887",CadetBlue:"#5f9ea0",Chartreuse:"#7fff00",Chocolate:"#d2691e",Coral:"#ff7f50",CornFlowerBlue:"#6495ed",CornSilk:"#fff8dc",Crimson:"#dc143c",Cyan:"#00ffff",DarkBlue:"#00008b",DarkCyan:"#008b8b",DarkGoldenRod:"#b8860b",DarkGray:"#a9a9a9",DarkGrey:"#a9a9a9",DarkGreen:"#006400",DarkKhaki:"#bdb76b",DarkMagenta:"#8b008b",DarkOliveGreen:"#556b2f",DarkOrange:"#ff8c00",DarkOrchid:"#9932cc",DarkRed:"#8b0000",DarkSalmon:"#e9967a",DarkSeaGreen:"#8fbc8f",
DarkSlateBlue:"#483d8b",DarkSlateGray:"#2f4f4f",DarkSlateGrey:"#2f4f4f",DarkTurquoise:"#00ced1",DarkViolet:"#9400d3",DeepPink:"#ff1493",DeepSkyBlue:"#00bfff",DimGray:"#696969",DimGrey:"#696969",DodgerBlue:"#1e90ff",FireBrick:"#b22222",FloralWhite:"#fffaf0",ForestGreen:"#228b22",Fuchsia:"#ff00ff",Gainsboro:"#dcdcdc",GhostWhite:"#f8f8ff",Gold:"#ffd700",GoldenRod:"#daa520",Gray:"#808080",Grey:"#808080",Green:"#008000",GreenYellow:"#adff2f",Honeydew:"#f0fff0",HotPink:"#ff69b4",IndianRed:"#cd5c5c",Indigo:"#4b0082",
Ivory:"#fffff0",Khaki:"#f0e68c",Lavender:"#e6e6fa",LavenderBlush:"#fff0f5",LawnGreen:"#7cfc00",LemonChiffon:"#fffacd",LightBlue:"#add8e6",LightCoral:"#f08080",LightCyan:"#e0ffff",LightGoldenRodYellow:"#fafad2",LightGray:"#d3d3d3",LightGrey:"#d3d3d3",LightGreen:"#90ee90",LightPink:"#ffb6c1",LightSalmon:"#ffa07a",LightSeaGreen:"#20b2aa",LightSkyBlue:"#87cefa",LightSlateGray:"#778899",LightSlateGrey:"#778899",LightSteelBlue:"#b0c4de",LightYellow:"#ffffe0",Lime:"#00ff00",LimeGreen:"#32cd32",Linen:"#faf0e6",
Magenta:"#ff00ff",Maroon:"#800000",MediumAquaMarine:"#66cdaa",MediumBlue:"#0000cd",Mediumorchid:"#ba55d3",MediumPurple:"#9370d8",MediumSeaGreen:"#3cb371",MediumSlateBlue:"#7b68ee",MediumSpringGreen:"#00fa9a",MediumTurquoise:"#48d1cc",MediumVioletRed:"#c71585",MidnightBlue:"#191970",MintCream:"#f5fffa",MistyRose:"#ffe4e1",Moccasin:"#ffe4b5",NavajoWhite:"#ffdead",Navy:"#000080",OldLace:"#fdf5e6",Olive:"#808000",OliveDrab:"#6b8e23",Orange:"#ffa500",OrangeRed:"#ff4500",Orchid:"#da70d6",PaleGoldenRod:"#eee8aa",
PaleGreen:"#98fb98",PaleTurquoise:"#afeeee",PaleVioletRed:"#d87093",PapayaWhip:"#ffefd5",PeachPuff:"#ffdab9",Peru:"#cd853f",Pink:"#ffc0cb",Plum:"#dda0dd",PowderBlue:"#b0e0e6",Purple:"#800080",RebeccaPurple:"#663399",Red:"#ff0000",RosyBrown:"#bc8f8f",RoyalBlue:"#4169e1",SaddleBrown:"#8b4513",Salmon:"#fa8072",SandyBrown:"#f4a460",SeaGreen:"#2e8b57",SeaShell:"#fff5ee",Sienna:"#a0522d",Silver:"#c0c0c0",SkyBlue:"#87ceeb",SlateBlue:"#6a5acd",SlateGray:"#708090",SlateGrey:"#708090",Snow:"#fffafa",SpringGreen:"#00ff7f",
SteelBlue:"#4682b4",Tan:"#d2b48c",Teal:"#008080",Thistle:"#d8bfd8",Tomato:"#ff6347",Turquoise:"#40e0d0",Violet:"#ee82ee",Wheat:"#f5deb3",White:"#ffffff",WhiteSmoke:"#f5f5f5",Yellow:"#ffff00",YellowGreen:"#9acd32",transparent:"transparent"},la=function(a,b){if(36===b)return"#"+a.substr(1,1).repeat(2)+a.substr(2,1).repeat(2)+a.substr(3,1).repeat(2);if(48===b)return"#"+a.substr(1,1).repeat(2)+a.substr(2,1).repeat(2)+a.substr(3,1).repeat(2)+a.substr(4,1).repeat(2);if(63===b)return"#"+a.substr(1,1)+a.substr(3,
1)+a.substr(5,1);if(84===b)return"#"+a.substr(1,1)+a.substr(3,1)+a.substr(5,1)+a.substr(7,1)},na=function(a){if("#"===a.substr(0,1)){if(null===a.match(/^#[0-9a-f]+$/gi))return!1;var b=a.length;return 7===b?1:9===b?2:4===b?3:5===b?4:!1}return"rg"===a.substr(0,2).toLowerCase()?(a=a.replace(/\s/g,"").toLowerCase(),"a"===a.substr(3,1)?null===a.match(/^rgba\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|1|0?\.?\d*?)\)$/)?!1:6:null===
a.match(/^rgb\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d)\)$/)?!1:5):"hs"===a.substr(0,2).toLowerCase()?(a=a.replace(/\s/g,"").toLowerCase(),"a"===a.substr(3,1)?null===a.match(/^hsla\((0|360|35\d|3[0-4]\d|[12]\d\d|0?\d?\d),(0|100|\d{1,2})%,(0|100|\d{1,2})%,(0|1|0?\.?\d*?)\)$/)?!1:8:null===a.match(/^hsl\((0|360|35\d|3[0-4]\d|[12]\d\d|0?\d?\d),(0|100|\d{1,2})%,(0|100|\d{1,2})%\)$/)?!1:7):-1!==a.toLowerCase().indexOf("gradient")?
null!==a.match(/.*gradient\s*\(((?:\([^\)]*\)|[^\)\(]*)*)\)/gi)?($check_gradient_dummy.style.background=a,b=Ta($check_gradient_dummy,"background"),$check_gradient_dummy.style.background="",-1===b.indexOf("gradient")?!1:10):!1:void 0===Object.keys(ma).find(function(b){return b.toLowerCase()===a.toLowerCase()})?!1:9},Ta=function(a,b){return window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):a.style[b.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})]},Ma=function(a){var d=
function(){var a=I.getBoundingClientRect();Q=parseInt(a.top+window.scrollY);ha=parseInt(a.left);R=I.offsetWidth;Y=I.offsetHeight;qa=N.offsetWidth;ma=Q;ra=Y;oa=pa.offsetWidth;ja=Q;U=Y;sa=oa},e=function(a){var b=$jscomp.makeIterator(a);a=b.next().value;var d=b.next().value,c=b.next().value;b=b.next().value;alpha_pointer_y=Math.round(ra-b*ra);ta=Math.round(R/100*d);ua=Math.round(Y-Y*c/100);hue_pointer_y=Math.round(U/(360/a));pa.style.transform="translate(-"+oa/2+"px, "+parseInt(alpha_pointer_y-oa/2)+
"px)";N.style.transform="translate("+(ta-qa/2)+"px ,"+(ua-qa/2)+"px)";Z.style.transform="translate(-"+sa/2+"px, "+parseInt(hue_pointer_y-sa/2)+"px)"},g=function(a){a=Math.max(Math.min(a.pageY-ja,U),0);Z.style.transform="translate(-"+sa/2+"px, "+parseInt(a-sa/2)+"px)";f[0]=Math.round(a/U*360);aa.style.background="linear-gradient(to bottom, hsl("+f[0]+","+f[1]+"%,"+f[2]+"%), transparent)";I.style.background="hsl("+f[0]+", 100%, 50%)";N.style.background="hsl("+f[0]+","+f[1]+"%,"+f[2]+"%)";Z.style.background=
"hsl("+f[0]+", 100%, 50%)";ba.style.background="hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]+")";J.textContent=f[0];va()},h=function(a){ta=Math.max(Math.min(a.pageX-ha,R),0);ua=Math.max(Math.min(a.pageY-Q,Y),0);f[1]=Math.round(ta/R*100);f[2]=Math.round(100-ua/Y*100);N.style.transform="translate("+(ta-qa/2)+"px ,"+(ua-qa/2)+"px)";aa.style.background="linear-gradient(to bottom, hsl("+f[0]+","+f[1]+"%,"+f[2]+"%), transparent)";N.style.background="hsl("+f[0]+","+f[1]+"%,"+f[2]+"%)";ba.style.background="hsla("+
f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]+")";J.textContent=f[1]+","+f[2];va()},m=function(a){a=Math.max(Math.min(a.pageY-ma,ra),0);f[3]=parseFloat((1-a/ra).toFixed(2));pa.style.transform="translate(-"+oa/2+"px, "+parseInt(a-oa/2)+"px)";ba.style.background="hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]+")";J.textContent=f[3];va()},l=function(a){m(a)},u=function(a){h(a)},x=function(a){g(a)},D=function(){!0===W?(W=!1,document.removeEventListener("mousemove",l,!1)):!0===T?(T=!1,document.removeEventListener("mousemove",
u,!1)):!0===S&&(S=!1,document.removeEventListener("mousemove",x,!1));J.textContent="";J.className="";document.removeEventListener("mouseup",D,!1);E.classList.remove("picker-mousehold")},r=function(){aa.style.background="linear-gradient(to bottom, hsl("+f[0]+","+f[1]+"%,"+f[2]+"%), transparent)";I.style.background="hsl("+f[0]+", 100%, 50%)";N.style.background="hsl("+f[0]+","+f[1]+"%,"+f[2]+"%)";Z.style.background="hsl("+f[0]+", 100%, 50%)";ba.style.background="hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]+
")"},va=function(){var a=1>f[3]?f:[f[0],f[1],f[2]];picker_color=1===ca?t(q(a),"rgb"):2===ca?t(a,"hsl"):X(t(q(a),"rgb"));da.textContent=picker_color},Fa=function(){da.textContent="INVALID COLOR VALUE";F.style.background="linear-gradient(transparent 0%, transparent 47%, red 50%, transparent 53%, transparent 100%)";ba.style.background="#fff"},Ua=function(){ea(picker_color,picker_color,c_cid);F.style.background=picker_color},Va=function(){arr_c[c_cid]=picker_color;arr_b[c_cid]=!1===fa?picker_color:"linear-gradient(135deg, transparent 0%, transparent 47%, red 50%, transparent 53%, transparent 100%)";
$color_inputs_c[c_cid].value=picker_color;$color_spans[c_cid].style.background=arr_b[c_cid]},Ga=function(a){var b=na(a);if(!1===b||10===b)fa=!0,picker_color=0,f=ia;else if(fa=!1,picker_color=a,1<=b&&4>=b){3===b?a=la(a,36):4===b&&(a=la(a,48));f=k(M(a,!1));if(1===b||3===b)f[3]=1;ca=0}else 5===b||6===b?(f=k(p(a)),5===b&&(f[3]=1),ca=1):7===b||8===b?(f=p(a),7===b&&(f[3]=1),ca=2):9===b&&("transparent"===a.toLowerCase()?f=[0,0,0,0]:(f=k(M(obj_css_colors_lowercase[a.toLowerCase()],!1),!1),f[3]=1),ca=0)},
Ha=function(){z.offsetHeight>window.outerHeight?E.style.overflowY="scroll":E.overflowY="hidden";d();e(f)},v=function(){c.scroll_to&&clearTimeout(c.scroll_to);c.scroll_to=setTimeout(function(){d()},20)},E=document.createElement("div"),z=document.createElement("div"),w=document.createElement("div"),B=document.createElement("p"),A=document.createElement("div"),G=document.createElement("p"),ba=document.createElement("span"),F=document.createElement("span"),O=document.createElement("p"),da=document.createElement("div"),
J=document.createElement("div"),H=document.createElement("div"),aa=document.createElement("div"),pa=document.createElement("div"),L=document.createElement("div"),Z=document.createElement("div"),I=document.createElement("div"),N=document.createElement("div"),P=document.createElement("p"),ia=[0,0,100,1],f=[],S=!1,T=!1,W=!1,ta=0,ua=0,Q=0,ha=0,R=0,Y=0,qa=0,ja=0,U=0,sa=0,ma=0,ra=0,oa=0,ca=0,fa=!1;window.picker_refresh_external=function(a){2!==picker_mode&&(z.className="picker-mode-"+picker_mode+" drag-head-wrapper");
Ga(a);!1===fa?(F.style.background="hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]+")",da.textContent=picker_color,e(f),r()):Fa()};"0x"===a.substr(0,2)&&(a="#"+a.substr(2,a.length));Ga(a);E.id="picker-wrapper-outer";E.className="drag-head-wrapper-outer";E.addEventListener("scroll",function(){d()},!1);z.id="picker-wrapper";z.className="picker-mode-"+picker_mode+" drag-head-wrapper";w.id="picker-head";w.className="drag-head";w.addEventListener("mousedown",function(a){Ia(a,z,E,d)},!1);z.appendChild(w);B.id=
"picker-btn-close";B.addEventListener("click",function(){Ja(z);picker_mode=0;window.removeEventListener("scroll",v,!1);window.removeEventListener("resize",Ha,!1);document.body.removeChild(E)},!1);z.appendChild(B);A.id="picker-preview-wrapper";G.id="picker-btn-add-replace";1===picker_mode?G.addEventListener("mousedown",Ua,!1):G.addEventListener("mousedown",Va,!1);F.id="picker-preview-sel";F.style.background=!1===fa?"hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]+")":"";ba.id="picker-preview-new";A.appendChild(G);
A.appendChild(ba);A.appendChild(F);z.appendChild(A);O.id="picker-btn-switch";O.addEventListener("mousedown",function(){picker_color=Ka(picker_color);var a=picker_color.substr(0,2);ca="rg"===a?1:"hs"===a?2:0;da.textContent=picker_color},!1);da.id="picker-text-switch";b=document.createElement("div");b.id="picker-switch-wrapper";b.appendChild(O);b.appendChild(da);z.appendChild(b);J.id="picker_controls_info";z.appendChild(J);H.id="picker-controls-wrapper";aa.id="alpha-slider";aa.addEventListener("mousedown",
function(a){W=!0;E.classList.add("picker-mousehold");J.className="alpha";document.addEventListener("mousemove",l,!1);document.addEventListener("mouseup",D,!1);m(a)},!1);pa.id="alpha-pointer";pa.className="pointer";aa.appendChild(pa);H.appendChild(aa);I.id="sat-rect";I.addEventListener("mousedown",function(a){T=!0;E.classList.add("picker-mousehold");J.className="sat";document.addEventListener("mousemove",u,!1);document.addEventListener("mouseup",D,!1);h(a)},!1);N.id="sat-pointer";N.className="pointer";
b=document.createElement("div");I.appendChild(b);I.appendChild(N);H.appendChild(I);b=null;L.id="hue-slider";L.addEventListener("mousedown",function(a){S=!0;E.classList.add("picker-mousehold");J.className="hue";document.addEventListener("mousemove",x,!1);document.addEventListener("mouseup",D,!1);g(a)},!1);Z.id="hue-pointer";Z.className="pointer";L.appendChild(Z);H.appendChild(L);z.appendChild(H);P.id="picker-btn-insert";z.appendChild(P);P.addEventListener("mousedown",function(){K.postMessage({command:"insert",
colorval:picker_color})},!1);window.addEventListener("scroll",v,!1);window.addEventListener("resize",Ha,!1);!1===fa?(da.textContent=picker_color,r()):Fa();La(z);E.appendChild(z);document.body.appendChild(E);a=z.offsetHeight;z.style.transform=a<window_height?"translateY("+Math.round((window_height-a)/2)+"px)":"translateY(0)";d();!1===fa&&e(f)},Na=function(a,b){0===picker_mode?(picker_mode=a,Ma(b)):(picker_mode=a,picker_refresh_external(b))},Ka=function(a){var b=na(a);if(1===b||2===b)return M(a,!0);
if(3===b)return la(a,36);if(4===b)return la(a,48);if(5===b||6===b)return t(k(p(a)),"hsl");if(7===b||8===b){a=X(t(q(p(a)),"rgb"));var d=a.split("");d[1]===d[2]&&d[3]===d[4]&&d[5]===d[6]&&(7===b?a="#"+d[1]+d[3]+d[5]:d[7]===d[8]&&(a="#"+d[1]+d[3]+d[5]+d[7]));return a}if(9===b){if("transparent"===a.toLowerCase())return"#0000";a=obj_css_colors_lowercase[a.toLowerCase()];b=a.split("");return b[1]===b[2]&&b[3]===b[4]&&b[5]===b[6]?"#"+b[1]+b[3]+b[5]:a}return!1},ea=function(b,c,y){var d=function(){for(a=0;a<
h;a++)$color_wrappers[e[a]].className="color-wrapper";$color_wrappers[c_cid].className="color-wrapper active";e[h-1]!==c_len-1&&($color_wrappers[c_len-1].className="hide")},n=!1;!0===b&&(b="New Color",c="#000");if(-1===y){if(0===filter_open)c_cid=y=0;else for(c_cid=y=e[0],e.unshift(y),h++,a=1;a<h;a++)$color_wrappers[e[a]].className="hide",e[a]++;n=!0}else if(y===c_len)$color_wrappers[c_cid].className="color-wrapper",0===filter_open?c_cid=c_len:(c_cid=y=e[h-1]+1,e.push(y),h++),n=!0;else if(1===filter_open){var k=
-1;for(a=0;a<h;a++)-1===k?e[a]===c_cid&&(k=a,e[a]++):($color_wrappers[e[a]].className="hide",e[a]++);e.splice(k,0,c_cid);h++}arr_n.splice(y,0,b);arr_c.splice(y,0,c);arr_b.splice(y,0,c);c_len++;F(c_len-1,c_len);if("insert-floatview"===mode_current)O(),1===filter_open&&d();else if(!0===w){if(0===filter_open)g===c_len-1&&($color_wrappers[m-1].className="hide",m++,g++,$color_wrappers[g-1].className="color-wrapper");else{g===e[h-1]&&($color_wrappers[e[m-1]].className="hide",m++,g++,$color_wrappers[e[g-
1]].className="color-wrapper");for(a=0;a<h;a++)e[a]>=m&&e[a]<=g&&($color_wrappers[e[a]].className="color-wrapper");e[h-1]!==c_len-1&&($color_wrappers[c_len-1].className="hide")}O()}else if(b=0===filter_open?c_len:h,!1===w&&200<b){0===l&&H();A=window.scrollY;Oa();if(0===filter_open){for(a=0;a<c_len;a++)$color_wrappers[a].className=a<m||a>g?"hide":"color-wrapper",$color_inputs_n[a].value=arr_n[a],$color_inputs_c[a].value=arr_c[a],$color_spans[a].style.background=arr_b[a];c_cid>=m&&c_cid<=g&&($color_wrappers[c_cid].className=
"color-wrapper active")}else{d=-1;for(a=0;a<c_len;a++)d=e.indexOf(a),-1!==d&&e[d]>=e[m]&&e[d]<=e[g]?$color_wrappers[e[d]].className="color-wrapper":$color_wrappers[a].className="hide",$color_inputs_n[a].value=arr_n[a],$color_inputs_c[a].value=arr_c[a],$color_spans[a].style.background=arr_b[a];c_cid>=e[m]&&c_cid<=e[g]&&($color_wrappers[c_cid].className="color-wrapper active")}$main_wrapper.style.padding=m*l+"px 0 "+(c_len-g)*l+"px 0";window.scrollTo(0,A);L()}else O(),1===filter_open&&d();!0===n&&($color_wrappers[c_cid].className=
"color-wrapper active");"insert-floatview"!==mode_current&&(!0===w?(n=l*c_cid,(n<=A||n>=A+window_height-B-l)&&window.scrollTo(0,n)):(0===l&&(l=$color_wrappers[0].offsetHeight),n=$color_wrappers[c_cid].offsetTop,d=window.scrollY,(n<=d||n>=d+window_height-B)&&window.scrollTo(0,n-B)));P()},wa=function(){var b=0===filter_open?c_len:h;if(1===filter_open){var c=-1;for(a=0;a<h;a++)-1===c?e[a]===c_cid&&(c=a,e[a]--):($color_wrappers[e[a]].className="hide",e[a]--);e.splice(c,1);h--}!0===w&&(200>=b-1?W():0===
filter_open?(g===c_len?(m--,g--,$color_wrappers[m].className="color-wrapper"):$color_wrappers[g].className="color-wrapper",$main_wrapper.style.padding=m*l+"px 0 "+(c_len-1-g)*l+"px 0"):(g===h+1?(m--,g--,$color_wrappers[e[m]].className="color-wrapper"):$color_wrappers[e[g]].className="color-wrapper",$main_wrapper.style.padding=m*l+"px 0 "+(h-g)*l+"px 0"));$color_wrapper_main.removeChild($color_wrappers[c_cid]);$color_wrappers.splice(c_cid,1);$color_inputs_n.splice(c_cid,1);$color_inputs_c.splice(c_cid,
1);$color_spans.splice(c_cid,1);arr_n.splice(c_cid,1);arr_c.splice(c_cid,1);arr_b.splice(c_cid,1);c_len--;c_cid===c_len&&c_cid--;if("insert-floatview"===mode_current)for(a=0;a<c_len;a++)$color_wrappers[a].wid=a,$color_wrappers[a].title=arr_n[a]===arr_c[a]?arr_n[a]:arr_n[a]+": "+arr_c[a];else if(0===filter_open)if(200<b&&200>=c_len)for(a=0;a<c_len;a++)$color_wrappers[a].wid=a,$color_wrappers[a].className="color-wrapper";else for(a=0;a<c_len;a++)$color_wrappers[a].wid=a;else if(!0===w)for(a=0;a<c_len;a++)$color_wrappers[a].wid=
a,a<g&&($color_wrappers[e[a]].className="color-wrapper");else for(c=e.slice(),a=0;a<c_len;a++){$color_wrappers[a].wid=a;var y=c.indexOf(a);-1!==y&&($color_wrappers[a].className="color-wrapper",c.splice(y,1))}1===b?c_cid=-1:$color_wrappers[c_cid].className="color-wrapper active";P()},Xa=function(){var d=function(b){var d=function(){if(0===filter_open&&200<c_len||1===filter_open&&200<h){0===l&&H();if(0===filter_open)for(a=0;a<c_len;a++)$color_wrappers[a].title="",a>g&&($color_wrappers[a].className=
"hide");else{var b=e.slice();for(a=0;a<c_len;a++)if($color_wrappers[a].title="",a>g){var d=b.indexOf(a);b.splice(d,1);-1!==d&&($color_wrappers[a].className="hide")}}window.scrollTo(0,0);scroll_y=0;A=-1;m=0;g=3*v;Pa(1===filter_open&&0<h?!0:!1);L()}else for(a=0;a<c_len;a++)$color_wrappers[a].title=""},c=function(){var b=function(a){$color_wrappers[a].title=arr_n[a]===arr_c[a]?arr_n[a]:arr_n[a]+": "+arr_c[a];!0===sort_mode&&$color_wrappers[a].removeEventListener("mousedown",colorwrapper_drag_mousedown,
!1)};if(200<c_len)if(W(),0===h){for(a=0;a<c_len;a++)b(a),$color_wrappers[a].className="color-wrapper";-1!==c_cid&&($color_wrappers[c_cid].className="color-wrapper active")}else{var d=e.slice(),c=-1;for(a=0;a<c_len;a++)b(a),c=d.indexOf(a),d.splice(c,1),-1!==c&&($color_wrappers[a].className="color-wrapper");-1!==c_cid&&-1!==e.indexOf(c_cid)&&($color_wrappers[c_cid].className="color-wrapper active")}else{for(a=0;a<c_len;a++)b(a);-1!==c_cid&&($color_wrappers[c_cid].className="color-wrapper active")}convert_mode=
sort_mode=!1},n=function(b){if(!0===b)for(sort_mode=!0,a=0;a<c_len;a++)$color_wrappers[a].addEventListener("mousedown",colorwrapper_drag_mousedown,!1);else for(sort_mode=!1,a=0;a<c_len;a++)$color_wrappers[a].removeEventListener("mousedown",colorwrapper_drag_mousedown,!1)},r="";switch(b.currentTarget.command){case "toggle-insert-edit":"edit"===mode_current||"edit-sort"===mode_current||"edit-convert"===mode_current?(!0===sort_mode&&n(!1),!0===convert_mode&&(convert_mode=!1),r="insert-listview"):("insert-floatview"===
mode_current&&d(),r="edit");break;case "toggle-insert-view":"insert-floatview"===mode_current?(d(),r="insert-listview"):(c(),r="insert-floatview");break;case "toggle-edit-sort":!1===sort_mode?(n(!0),r="edit-sort"):(n(!1),r="edit");break;case "toggle-edit-convert":!1===convert_mode?(r="edit-convert",convert_mode=!0):(r="edit",convert_mode=!1)}mode_current=$main_wrapper.className=r;Q();ha()},c=function(b){var d=b.currentTarget.sort_type;b=!0;if(0===d||1===d){var c=[];for(a=0;a<c_len;a++)c[a]=[arr_n[a],
arr_c[a],arr_b[a]];c.sort(function(a,b){return a[d]===b[d]?0:a[d]<b[d]?-1:1});for(a=0;a<c_len;a++)arr_n[a]=c[a][0],arr_c[a]=c[a][1],arr_b[a]=c[a][2]}else if(2===d){c=[];c=[];var n=!1;for(a=0;a<c_len;a++)n=na(arr_c[a]),1<=n&&4>=n?c.push(k(M(arr_c[a],!1))):5===n||6===n?c.push(k(p(arr_c[a]))):7===n||8===n?c.push(p(arr_c[a])):9===n?c.push(k(M(obj_css_colors_lowercase[arr_c[a].toLowerCase()],!1))):c.push([-1]);if(0===c.length)b=!1;else for(c=c.map(function(a,b){return{color:a,index:b}}).sort(function(a,
b){return a.color[0]-b.color[0]}).map(function(a){return[arr_n[a.index],arr_c[a.index],arr_b[a.index]]}),a=0;a<c_len;a++)arr_n[a]=c[a][0],arr_c[a]=c[a][1],arr_b[a]=c[a][2]}else 3===d&&(arr_n.reverse(),arr_c.reverse(),arr_b.reverse());!0===b&&(O(),1===filter_open&&ia())},y=function(b){var d=function(a){var b=a.split("");b[1]===b[2]&&b[3]===b[4]&&b[5]===b[6]&&(9===b.length?b[7]===b[8]&&(a="#"+b[1]+b[3]+b[5]+b[7]):a="#"+b[1]+b[3]+b[5]);return a};b=b.currentTarget.convert_type;var c="",n=!1,e=!1;for(a=
0;a<c_len;a++)n=!1,c=arr_c[a],e=na(c),1<=e&&4>=e?1===b?n=M(c,!0):2===b&&(n=t(k(M(c,!1)),"hsl")):5===e||6===e?0===b?n=d(X(c)):2===b&&(n=t(k(p(c)),"hsl")):7===e||8===e?0===b?n=d(X(t(q(p(c)),"rgb"))):1===b&&(n=t(q(p(c)),"rgb")):9===e&&(n=0===b?d(obj_css_colors_lowercase[c.toLowerCase()]):1===b?M(obj_css_colors_lowercase[c.toLowerCase()],!0):t(k(M(obj_css_colors_lowercase[c.toLowerCase()],!1)),"hsl")),!1!==n&&(arr_c[a]=n,$color_inputs_c[a].value=n)},ka=document.createElement("div"),C=document.createElement("div"),
V=document.createElement("ul"),w=document.createElement("div"),u=document.createElement("div"),x=document.createElement("div"),D=[];window.btn_save_click=function(){G("save",!0,function(a){!0===a&&K.postMessage({command:"save_palette",arr_n:arr_n,arr_c:arr_c,c_len:c_len})})};window.$main_wrapper=document.createElement("div");window.$controls_wrapper=document.createElement("div");window.$dropdown_input=document.createElement("input");window.$btn_filter=document.createElement("p");window.$filter_wrapper=
document.createElement("div");window.$filter_input=document.createElement("input");window.$statusbar=document.createElement("div");$controls_wrapper.id="controls-wrapper";ka.id="toggle-wrapper";w.id="edit-wrapper";u.id="edit-btn-wrapper";x.className="float-wrapper";b=document.createElement("p");b.id="btn-toggle-insert-edit";b.title="toggle edit options";b.command="toggle-insert-edit";b.addEventListener("mousedown",d,!1);ka.appendChild(b);C.className="dropdown-wrapper";V.className="hide";$dropdown_input.value=
arr_p[p_cid];$dropdown_input.opened=!1;$dropdown_input.title="load palette";$dropdown_input.addEventListener("mousedown",function(){if(!1===$dropdown_input.opened){$dropdown_input.opened=!0;var b=function(a){a.currentTarget.t_id!==p_cid&&(p_cid=a.currentTarget.t_id,K.postMessage({command:"change_palette",p_cid:p_cid}),$dropdown_input.value=arr_p[p_cid])};for(a=0;a<p_len;a++)D[a]=document.createElement("li"),D[a].t_id=a,D[a].textContent=arr_p[a],D[a].addEventListener("mousedown",b,!1),V.appendChild(D[a]);
V.className="";C.appendChild(V)}},!1);$dropdown_input.addEventListener("focusout",function(){$dropdown_input.value=arr_p[p_cid];$dropdown_input.opened=!1;D=[];V.innerHTML="";V.className="hide"},!1);$dropdown_input.addEventListener("keyup",function(b){b.preventDefault();if(27===b.keyCode){$dropdown_input.value=arr_p[p_cid];for(a=0;a<p_len;a++)D[a].className="";V.className=""}else{b=$dropdown_input.value.toLowerCase();var c=0;for(a=0;a<p_len;a++)-1!==arr_p[a].toLowerCase().indexOf(b)?(D[a].className=
"",c++):D[a].className="hide";V.className=0===c?"hide":""}},!1);C.appendChild($dropdown_input);ka.appendChild(C);b=document.createElement("p");b.id="btn-toggle-insertview";b.title="toggle view";b.command="toggle-insert-view";b.addEventListener("mousedown",d,!1);ka.appendChild(b);$btn_filter.id="btn-filter";$btn_filter.title="toggle filter";$btn_filter.addEventListener("click",function(){return R(!0)});ka.appendChild($btn_filter);$filter_wrapper.id="filter-wrapper";$filter_wrapper.className="hide";
$filter_input.addEventListener("keyup",ia,!1);$filter_wrapper.appendChild($filter_input);$controls_wrapper.appendChild(ka);$controls_wrapper.appendChild($filter_wrapper);b=document.createElement("p");b.id="btn-add";b.title="add color";b.addEventListener("mousedown",function(){ea(!0,!0,c_cid)},!1);u.appendChild(b);b=document.createElement("p");b.id="btn-toggle-edit-sort";b.title="toggle sort-mode";b.command="toggle-edit-sort";b.addEventListener("mousedown",d,!1);u.appendChild(b);b=document.createElement("p");
b.id="btn-sort-name";b.sort_type=0;b.addEventListener("mousedown",c,!1);u.appendChild(b);b=document.createElement("p");b.id="btn-sort-value";b.sort_type=1;b.addEventListener("mousedown",c,!1);u.appendChild(b);b=document.createElement("p");b.id="btn-sort-hue";b.sort_type=2;b.addEventListener("mousedown",c,!1);u.appendChild(b);b=document.createElement("p");b.id="btn-sort-reverse";b.sort_type=3;b.addEventListener("mousedown",c,!1);u.appendChild(b);b=document.createElement("p");b.id="btn-toggle-edit-convert";
b.title="toggle color-converter";b.command="toggle-edit-convert";b.addEventListener("mousedown",d,!1);u.appendChild(b);b=document.createElement("p");b.id="btn-convert-hex";b.convert_type=0;b.addEventListener("mousedown",y,!1);u.appendChild(b);b=document.createElement("p");b.id="btn-convert-rgb";b.convert_type=1;b.addEventListener("mousedown",y,!1);u.appendChild(b);b=document.createElement("p");b.id="btn-convert-hsl";b.convert_type=2;b.addEventListener("mousedown",y,!1);u.appendChild(b);b=document.createElement("p");
b.id="btn-random";b.title="randomize palette";b.addEventListener("mousedown",function(){G("randomize",!0,function(b){if(!0===b){for(a=0;a<c_len;a++)arr_n[a]="Color "+(a+1),arr_c[a]=t([Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())],"rgb"),arr_b[a]=arr_c[a];O()}})},!1);u.appendChild(b);b=document.createElement("p");b.id="btn-pm-open";b.title="open palette manager";b.addEventListener("mousedown",Wa,!1);x.appendChild(b);b=document.createElement("p");b.id="btn-texteditor";
b.title="open palette in vscode";b.addEventListener("mousedown",function(){K.postMessage({command:"texteditor"})},!1);x.appendChild(b);b=document.createElement("p");b.id="btn-restore";b.title="restore palette";b.addEventListener("mousedown",function(){G("restore",!0,function(a){!0===a&&(S(),arr_n=arr_n_restore.slice(),arr_c=arr_c_restore.slice(),c_len=c_len_restore,F(0,c_len),200<c_len&&T(),1===filter_open&&""!==filter_val&&ia())})},!1);x.appendChild(b);b=document.createElement("p");b.id="btn-save";
b.title="save palette";b.addEventListener("mousedown",btn_save_click,!1);x.appendChild(b);b=null;u.appendChild(x);w.appendChild(u);$controls_wrapper.appendChild(w);$main_wrapper.className="hide";$main_wrapper.appendChild($controls_wrapper);$statusbar.id="statusbar";$main_wrapper.appendChild($statusbar)},R=function(b){if(0===filter_open)filter_open=1,$filter_wrapper.className="",$btn_filter.className="active",$filter_input.focus();else{var c=function(){$color_wrapper_main.className="hide";for(a=0;a<
c_len;a++)$color_wrappers[a].className="color-wrapper";$color_wrapper_main.className=""};if("insert-floatview"===mode_current)c();else if(!0===b)if(h<c_len&&c(),200<c_len){0===l&&H();window.scrollTo(0,0);m=A=0;g=3*v;for(a=0;a<c_len;a++)$color_wrappers[a].className=a>g?"hide":"color-wrapper";-1!==c_cid&&c_cid<g&&($color_wrappers[c_cid].className="color-wrapper active");$main_wrapper.style.padding="0 0 "+(c_len-g)*l+"px 0";!1===w&&L()}else-1!==c_cid&&($color_wrappers[c_cid].className="color-wrapper active");
filter_open=0;filter_val="";e=[];h=0;$btn_filter.className="";$filter_wrapper.className="hide";$filter_input.value="";P()}Q();ha()},ia=function(){filter_val=$filter_input.value.toLowerCase();window.scrollTo(0,0);!0===w&&(m=A=0,g=3*v);e=[];h=0;if("insert-floatview"===mode_current||"insert-floatview"!==mode_current&&200>c_len)for(a=0;a<c_len;a++)-1!==arr_c[a].toLowerCase().indexOf(filter_val)||-1!==arr_n[a].toLowerCase().indexOf(filter_val)?($color_wrappers[a].className="color-wrapper",e[h]=a,h++):
($color_wrappers[a].className="hide",a===c_cid&&(c_cid=-1));else{for(a=0;a<c_len;a++)-1!==arr_c[a].toLowerCase().indexOf(filter_val)||-1!==arr_n[a].toLowerCase().indexOf(filter_val)?(e[h]=a,h++):a===c_cid&&(c_cid=-1),$color_wrappers[a].className="hide";if(200<h){for(a=0;a<g;a++)$color_wrappers[e[a]].className="color-wrapper",-1!==c_cid&&c_cid===e[a]&&$color_wrappers[e[a]].classList.add("active");!1===w&&(L(),$main_wrapper.style.padding="0 0 "+(h-g)*l+"px 0")}else if(!0===w&&W(),0!==h)for(a=0;a<h;a++)$color_wrappers[e[a]].className=
"color-wrapper",-1!==c_cid&&c_cid===e[a]&&$color_wrappers[e[a]].classList.add("active")}P();ha()},Wa=function(){if(!0!==xa){var c=function(a){13===a.keyCode&&(a=a.currentTarget,e(a.value,a.add_saveas))},n=function(a){a=a.currentTarget.previousElementSibling;e(a.value,a.add_saveas)},e=function(a,b){a=a.trim();!1!==m(a)&&G("save",!0,function(c){if(!0===c){if(!0===b)var d=c=!1;else c=arr_n,d=arr_c;K.postMessage({command:"add_palette",arr_n:c,arr_c:d,fname:a})}})},g=function(a){13===a.keyCode&&k(a.currentTarget.parentNode.t_id,
a.currentTarget.value)},h=function(a){a=a.currentTarget.parentNode.t_id;k(a,$pm_list_inputs[a].value)},k=function(a,b){b=b.trim();b.toLowerCase()!==arr_p[a].toLowerCase()&&!1!==m(b)&&G("rename",!0,function(c){!0===c&&K.postMessage({command:"rename_palette",p_id:a,fname:b})})},m=function(b){if(""===b)return!1;for(a=0;a<p_len;a++)if(b.toLowerCase()===arr_p[a].toLowerCase())return G("exists",!1,function(a){}),!1;return b.match(/[\\\\/:*?'<>|]/g)?(G("illegal-char",!1,function(a){}),!1):!0},u=function(a){var b=
a.currentTarget.parentNode.t_id;G("delete",!0,function(a){!0===a&&(pm_remove_list_wrapper_id=b,K.postMessage({command:"delete_palette",p_id:b}))})},x=document.createElement("div"),l=document.createElement("div");window.$pm_list_wrapper_main=null;window.$pm_list_wrappers=[];window.$pm_list_inputs=[];window.pm_remove_list_wrapper_id=-1;window.pm_create_listwrappers=function(c,d,n){for(a=c;a<d;a++)$pm_list_wrappers[a]=document.createElement("div"),$pm_list_wrappers[a].t_id=a,$pm_list_inputs[a]=document.createElement("input"),
$pm_list_inputs[a].value=arr_p[a],$pm_list_inputs[a].addEventListener("keydown",g,!1),$pm_list_wrappers[a].appendChild($pm_list_inputs[a]),b=document.createElement("p"),b.addEventListener("mousedown",h,!1),$pm_list_wrappers[a].appendChild(b),b=document.createElement("p"),b.addEventListener("mousedown",u,!1),$pm_list_wrappers[a].appendChild(b),$pm_list_wrapper_main.appendChild($pm_list_wrappers[a]);if(!0===n)for(a=0;a<p_len;a++)$pm_list_inputs[a].value=arr_p[a]};var r=document.createElement("div");
x.id="pm-wrapper-outer";x.className="drag-head-wrapper-outer";l.id="pm-wrapper";l.className="drag-head-wrapper";$pm_list_wrapper_main=document.createElement("div");$pm_list_wrapper_main.id="pm-list-wrapper";b=document.createElement("p");b.addEventListener("mousedown",function(){Ja(l);document.body.removeChild(x);xa=!1},!1);r.id="pm-head";r.className="drag-head";r.addEventListener("mousedown",function(a){Ia(a,l,x,!1)},!1);r.appendChild(b);l.appendChild(r);r=document.createElement("div");b=document.createElement("input");
b.add_saveas=!0;b.addEventListener("keydown",c,!1);r.appendChild(b);b=document.createElement("p");b.add_saveas=!0;b.addEventListener("mousedown",n,!1);r.appendChild(b);l.appendChild(r);r=document.createElement("div");b=document.createElement("input");b.add_saveas=!1;b.addEventListener("keydown",c,!1);r.appendChild(b);b=document.createElement("p");b.add_saveas=!1;b.addEventListener("mousedown",n,!1);r.appendChild(b);l.appendChild(r);b=document.createElement("span");l.appendChild(b);b=null;pm_create_listwrappers(0,
p_len,!1);l.appendChild($pm_list_wrapper_main);x.appendChild(l);document.body.appendChild(x);La(l);xa=!0}},G=function(a,c,e){var d=function(){e(!0);g()},n=function(a){9===a.keyCode?a.preventDefault():13===a.keyCode?d():27===a.keyCode&&(e(!1),g())},g=function(){document.removeEventListener("keydown",n,!1);$main_wrapper.removeChild(l);h.focus();document.addEventListener("keypress",ya,!1)},h=document.activeElement,l=document.createElement("div"),k=document.createElement("div");document.removeEventListener("keypress",
ya,!1);l.id="dib-wrapper";k.className=a;b=document.createElement("p");b.addEventListener("mousedown",d,!1);k.appendChild(b);!0===c&&(b=document.createElement("p"),b.addEventListener("mousedown",function(){e(!1);g()},!1),k.appendChild(b));b=null;l.appendChild(k);$main_wrapper.appendChild(l);h.blur();setTimeout(function(){document.addEventListener("keydown",n,!1)},0)},F=function(b,c){var d=function(a){-1!==c_cid&&($color_wrappers[c_cid].className="color-wrapper");c_cid=a.currentTarget.wid;$color_wrappers[c_cid].className=
"color-wrapper active";ha()},n=function(){K.postMessage({command:"insert",colorval:arr_c[c_cid]});t!==c_cid?(t=c_cid,$color_wrappers[c_cid].className="color-wrapper active ani-insert"):($color_wrappers[c_cid].className="color-wrapper active",setTimeout(function(){$color_wrappers[c_cid].className="color-wrapper active ani-insert"},0))},e=function(){var a=Ka(arr_c[c_cid]);!1!==a&&(arr_c[c_cid]=a,$color_inputs_c[c_cid].value=a)},g=function(){-1!==c_cid&&l(c_cid)},h=function(){l(c_cid)},l=function(a){var b=
$color_inputs_n[a].value;b=-1!==b.indexOf(":")?b.replace(/:/g,"."):b;arr_n[a]=b},k=function(a){-1!==c_cid&&r(a.currentTarget.parentNode.parentNode.wid)},m=function(a){13===a.keyCode&&r(c_cid)},r=function(a){var b=$color_inputs_c[a].value.trim();arr_b[a]=!1===na(b)?"linear-gradient(135deg, transparent 0%, transparent 47%, red 50%, transparent 53%, transparent 100%)":b;arr_c[a]=b;$color_spans[a].style.background=arr_b[a]};window.drag=!1;window.$el_drag=null;window.$el_hover=null;window.drag_id=0;window.hover_id=
0;window.colorwrapper_drag_mousedown=function(b){drag=!0;$el_hover=$el_drag=b.currentTarget;drag_id=$el_drag.wid;for(a=0;a<c_len;a++)$color_wrappers[a].addEventListener("mouseenter",colorwrapper_drag_mouseenter,!1);document.addEventListener("mouseup",colorwrapper_drag_doc_mouseup,!1);-1!==c_cid&&($color_wrappers[c_cid].className="color-wrapper");$el_drag.className="color-wrapper active drag-element";c_cid=drag_id};window.colorwrapper_drag_mouseenter=function(a){hover_id=a.currentTarget.wid;$color_spans[drag_id].style.background=
arr_b[hover_id];$color_inputs_n[drag_id].value=arr_n[hover_id];$color_inputs_c[drag_id].value=arr_c[hover_id];$color_spans[hover_id].style.background=arr_b[drag_id];$color_inputs_n[hover_id].value=arr_n[drag_id];$color_inputs_c[hover_id].value=arr_c[drag_id];var b=arr_c[drag_id],c=arr_n[drag_id],d=arr_b[drag_id];arr_c[drag_id]=arr_c[hover_id];arr_n[drag_id]=arr_n[hover_id];arr_b[drag_id]=arr_b[hover_id];arr_c[hover_id]=b;arr_n[hover_id]=c;arr_b[hover_id]=d;$el_drag.className="color-wrapper";$el_hover=
a.currentTarget;$el_hover.className="color-wrapper active drag-element";$el_drag=$el_hover;c_cid=drag_id=hover_id};window.colorwrapper_drag_doc_mouseup=function(){drag=!1;for(a=0;a<c_len;a++)$color_wrappers[a].removeEventListener("mouseenter",colorwrapper_drag_mouseenter,!1);document.removeEventListener("mouseup",colorwrapper_drag_doc_mouseup,!1);$el_drag.className="color-wrapper active"};var p=null,q=null,t=-1;if("insert-floatview"!==mode_current)var v=200<c_len||1===filter_open?"hide":"color-wrapper",
w=!1;else v=1===filter_open?"hide":"color-wrapper",w=!0;!0===za?(window.$color_wrappers=[],window.$color_spans=[],window.$color_inputs_n=[],window.$color_inputs_c=[],window.$color_mode_switches=[],window.$color_wrapper_main=document.createElement("div"),$color_wrapper_main.id="color-wrapper-main",$color_wrapper_main.addEventListener("contextmenu",Ya,!1)):$main_wrapper.className=mode_current+" hide";for(a=b;a<c;a++)arr_b[a]=!1===na(arr_c[a])?"linear-gradient(135deg, transparent 0%, transparent 47%, red 50%, transparent 53%, transparent 100%)":
arr_c[a],$color_wrappers[a]=document.createElement("div"),$color_wrappers[a].wid=a,$color_wrappers[a].className=v,$color_wrappers[a].setAttribute("tabindex","0"),$color_wrappers[a].addEventListener("focusin",d,!1),!0===sort_mode&&$color_wrappers[a].addEventListener("mousedown",colorwrapper_drag_mousedown,!1),!0===w&&($color_wrappers[a].title=arr_n[a]===arr_c[a]?arr_n[a]:arr_n[a]+": "+arr_c[a]),$color_spans[a]=document.createElement("span"),$color_spans[a].addEventListener("click",n,!1),$color_spans[a].style.background=
arr_b[a],p=document.createElement("div"),$color_inputs_n[a]=document.createElement("input"),$color_inputs_n[a].addEventListener("focusout",g,!1),$color_inputs_n[a].addEventListener("keyup",h,!1),$color_inputs_n[a].value=arr_n[a],$color_inputs_c[a]=document.createElement("input"),$color_inputs_c[a].addEventListener("focusout",k,!1),$color_inputs_c[a].addEventListener("keyup",m,!1),$color_inputs_c[a].value=arr_c[a],$color_mode_switches[a]=document.createElement("p"),$color_mode_switches[a].addEventListener("click",
e,!1),q=document.createElement("i"),q.addEventListener("click",wa,!1),p.appendChild($color_inputs_n[a]),p.appendChild($color_inputs_c[a]),p.appendChild($color_mode_switches[a]),$color_wrappers[a].appendChild(q),$color_wrappers[a].appendChild($color_spans[a]),$color_wrappers[a].appendChild(p),$color_wrapper_main.appendChild($color_wrappers[a]);!0===za?(-1!==c_cid&&c_cid<c_len&&($color_wrappers[c_cid].className=v+" active"),$main_wrapper.appendChild($color_wrapper_main)):$main_wrapper.className=mode_current;
0===filter_open&&P()},Aa=function(){$color_wrapper_main.style.minHeight=window_height-B-statusbar_height-4+"px"},Ya=function(a){var c=function(){Na(2,arr_c[c_cid])},d=function(){ea(arr_n[c_cid],arr_c[c_cid],c_cid)},e=function(){cut_copy_mode=1;arr_copy=[arr_n[c_cid],arr_c[c_cid],arr_b[c_cid]]},g=function(){cut_copy_mode=2;arr_copy=[arr_n[c_cid],arr_c[c_cid],arr_b[c_cid]];wa()},h=function(){!1!==cut_copy_mode&&(1===cut_copy_mode?(arr_n[c_cid]=arr_copy[0],arr_c[c_cid]=arr_copy[1],arr_b[c_cid]=arr_copy[2],
$color_inputs_n[c_cid].value=arr_n[c_cid],$color_inputs_c[c_cid].value=arr_c[c_cid],$color_spans[c_cid].style.background=arr_b[c_cid],"insert-floatview"===mode_current&&($color_wrappers[c_cid].title=arr_n[c_cid]===arr_c[c_cid]?arr_n[c_cid]:arr_n[c_cid]+": "+arr_c[c_cid])):!0===m&&0<c_len?ea(arr_copy[0],arr_copy[1],c_len):ea(arr_copy[0],arr_copy[1],c_cid))},l=function(){document.removeEventListener("keyup",l,!1);document.removeEventListener("mouseup",l,!1);document.body.removeChild($context_ul)},k=
function(){$context_ul.style.top=a.clientY+ja<=window_height?a.clientY+"px":window_height-ja-4+"px";$context_ul.style.left=a.clientX+Ba>=window_width?window_width-Ba+"px":a.clientX+"px"};"undefined"===typeof arr_copy&&(window.arr_copy=[],window.cut_copy_mode=!1);var m=a.target===$color_wrapper_main?!0:!1;window.$context_ul=document.createElement("ul");$context_ul.id="context-ul";b=document.createElement("li");b.id="context-li-picker";!1===m?b.addEventListener("mouseup",c,!1):b.className="context-li-disabled";
$context_ul.appendChild(b);b=document.createElement("li");b.id="context-li-add";b.addEventListener("mouseup",function(){!0===m&&0<c_len?ea(!0,!0,c_len):ea(!0,!0,c_cid)},!1);$context_ul.appendChild(b);b=document.createElement("li");b.id="context-li-duplicate";!1===m?b.addEventListener("mouseup",d,!1):b.className="context-li-disabled";$context_ul.appendChild(b);b=document.createElement("li");b.id="context-li-delete";!1===m?b.addEventListener("mouseup",wa,!1):b.className="context-li-disabled";$context_ul.appendChild(b);
b=document.createElement("li");b.id="context-li-copy";!1===m?b.addEventListener("mouseup",e,!1):b.className="context-li-disabled";$context_ul.appendChild(b);b=document.createElement("li");b.id="context-li-cut";!1===m?b.addEventListener("mouseup",g,!1):b.className="context-li-disabled";$context_ul.appendChild(b);b=document.createElement("li");b.id="context-li-paste";!0===m&&2===cut_copy_mode||!1===m&&!1!==cut_copy_mode?b.addEventListener("mouseup",h,!1):b.className="context-li-disabled";!1!==cut_copy_mode&&
b.addEventListener("mouseup",h,!1);$context_ul.appendChild(b);b=null;document.addEventListener("mouseup",l,!1);document.addEventListener("keyup",l,!1);0===ja?(document.body.appendChild($context_ul),ja=$context_ul.clientHeight,Ba=$context_ul.clientWidth,k()):(k(),document.body.appendChild($context_ul))},H=function(){if(0===l)if("insert-floatview"!==mode_current){var a=0===h?0:e[0];$color_wrappers[a].className="color-wrapper";l=$color_wrappers[a].offsetHeight}else{a=$color_wrappers[0].cloneNode(!0);
var b=document.createElement("div");a.className="color-wrapper";b.className="edit";b.appendChild(a);document.body.appendChild(b);l=b.offsetHeight;document.body.removeChild(b)}v=Math.ceil((window_height-B)/l);g=3*v},T=function(){H();for(a=0;a<g;a++)$color_wrappers[a].className="color-wrapper";Qa();L()},L=function(){window.addEventListener("scroll",Ra,!1);w=!0},Ra=function(){Qa()},Qa=function(){var b=window.scrollY,c=Math.floor(b/l),k=1===filter_open&&0<h?!0:!1;if(c>=v){var p=c+2*v;c-=v}else c=0,p=
3*v;!1===k?p>=c_len&&(p=c_len,c=c_len-3*v):p>=h&&(p=h,c=h-3*v);if(b<=A){var q=m-c;if(!1===k)for(a=0;a<q;a++)$color_wrappers[c+a].className="color-wrapper",$color_wrappers[p+a].className="hide";else for(a=0;a<q;a++)$color_wrappers[e[c+a]].className="color-wrapper",$color_wrappers[e[p+a]].className="hide"}else if(q=c-m,!1===k)for(a=0;a<q;a++)$color_wrappers[m+a].className="hide",$color_wrappers[g+a].className="color-wrapper";else for(a=0;a<q;a++)$color_wrappers[e[m+a]].className="hide",$color_wrappers[e[g+
a]].className="color-wrapper";-1!==c_cid&&c_cid>=c&&c_cid<=p&&($color_wrappers[c_cid].className="color-wrapper active");A=b;m=c;g=p;Pa(k)},Pa=function(a){$main_wrapper.style.padding=!1===a?m*l+"px 0 "+(c_len-g)*l+"px 0":m*l+"px 0 "+(h-g)*l+"px 0"},W=function(){window.removeEventListener("scroll",Ra,!1);w=!1;$main_wrapper.style.padding=""},Oa=function(){m=Math.floor(window.scrollY/l);g=0;m>=v?(g=m+2*v,m-=v):(m=0,g=3*v);g>=c_len&&(g=c_len,m=c_len-3*v)},P=function(){$statusbar.textContent=0===filter_open?
c_len+" entries":h+" / "+c_len+" entries"},Q=function(){B=$controls_wrapper.offsetHeight;document.body.style.paddingTop=B+"px";Aa()},La=function(a){"undefined"===typeof $drag_wrapper&&(window.$drag_wrapper=null,window.$drag_wrapper_outer=null,window.drag_mouseup_func=!1,window.arr_drag_head_elements=[],window.drag_head_elements_len=0);0===drag_head_elements_len&&window.addEventListener("resize",Sa,!1);arr_drag_head_elements[drag_head_elements_len]=a;drag_head_elements_len++},Ja=function(b){for(a=
0;a<drag_head_elements_len;a++)if(b===arr_drag_head_elements[a]){arr_drag_head_elements.splice(a,1);drag_head_elements_len--;break}0===drag_head_elements_len&&window.removeEventListener("resize",Sa,!1)},Ia=function(a,b,c,e){$drag_wrapper=b;$drag_wrapper_outer=c;drag_mouseup_func=e;b=$drag_wrapper.getBoundingClientRect();$drag_wrapper.start_top=parseInt(b.top);$drag_wrapper.start_left=parseInt(b.left);$drag_wrapper.start_x=a.pageX;$drag_wrapper.start_y=a.pageY;$drag_wrapper.dragged=!0;$drag_wrapper.style.margin=
0;$drag_wrapper.classList.add("drag");$drag_wrapper_outer.classList.add("mousehold");document.addEventListener("mousemove",Ca,!1);document.addEventListener("mouseup",Da,!1);Ca(a)},Ca=function(a){$drag_wrapper.style.transform="translate("+($drag_wrapper.start_left+a.pageX-$drag_wrapper.start_x)+"px ,"+($drag_wrapper.start_top+a.pageY-$drag_wrapper.start_y)+"px)";(a.pageX>=window_width||0>=a.pageX||a.pageY>=window_height||0>=a.pageY)&&Da(a)},Da=function(a){document.removeEventListener("mousemove",Ca,
!1);document.removeEventListener("mouseup",Da,!1);$drag_wrapper_outer.classList.remove("mousehold");var b=$drag_wrapper.start_left+a.pageX-$drag_wrapper.start_x;a=$drag_wrapper.start_top+a.pageY-$drag_wrapper.start_y;var c=!1;b>=window_width-100?(b=window_width-100,c=!0):100>=b+$drag_wrapper.offsetWidth&&(b=-$drag_wrapper.offsetWidth+100,c=!0);a>=window.innerHeight-100?(a=window.innerHeight-100,c=!0):0>=a&&(a=0,c=!0);!0===c&&($drag_wrapper.style.transform="translate("+b+"px ,"+a+"px)");!1!==drag_mouseup_func&&
drag_mouseup_func();$drag_wrapper_outer=$drag_wrapper=null;drag_mouseup_func=!1},Sa=function(){for(a=0;a<drag_head_elements_len;a++){!0===arr_drag_head_elements[a].dragged&&(arr_drag_head_elements[a].dragged=!1,arr_drag_head_elements[a].classList.remove("drag"),arr_drag_head_elements[a].style.margin="",arr_drag_head_elements[a].style.transform="translateY("+arr_drag_head_elements[a].getBoundingClientRect().top+"px)");var b=arr_drag_head_elements[a].getBoundingClientRect();b.top>window.innerHeight-
100?arr_drag_head_elements[a].style.transform="translateY("+(window.innerHeight-100)+"px)":0>b.top&&(current_y=0,arr_drag_head_elements[a].style.transform="translateY(0px)")}},Za=function(){c.resize_to&&clearTimeout(c.resize_to);c.resize_to=setTimeout(function(){window_width=window.innerWidth;var b=window.innerHeight;0!==l&&(v=Math.ceil((b-B)/l));var c=$controls_wrapper.clientHeight;c!==B&&(B=c,document.body.style.paddingTop=B+"px");if("insert-floatview"!==mode_current&&200<c_len&&(v=Math.ceil((b-
B)/l),b>window_height)){Oa();for(a=m;a<g;a++)$color_wrappers[a].className="color-wrapper";-1!==c_cid&&c_cid>=m&&c_cid<=g&&($color_wrappers[c_cid].className="color-wrapper active");$main_wrapper.style.padding=m*l+"px 0 "+(c_len-g)*l+"px 0"}window_height=b;Aa()},20)},O=function(){if("insert-floatview"!==mode_current)for(a=0;a<c_len;a++)$color_inputs_n[a].value=arr_n[a],$color_inputs_c[a].value=arr_c[a],$color_spans[a].style.background=arr_b[a];else for(a=0;a<c_len;a++)$color_inputs_n[a].value=arr_n[a],
$color_inputs_c[a].value=arr_c[a],$color_spans[a].style.background=arr_b[a],$color_wrappers[a].title=arr_n[a]===arr_c[a]?arr_n[a]:arr_n[a]+": "+arr_c[a]},ha=function(){K.postMessage({command:"store_webview_state",mode_current:mode_current,c_cid:c_cid,filter_open:filter_open,filter_val:filter_val})},ya=function(a){!0===a.ctrlKey&&19===a.which&&(!0===a.shiftKey?"no-palettes"!==mode_current&&btn_save_click():K.postMessage({command:"save_active_doc"}))},S=function(){window.scrollTo(0,0);!0===w&&(W(),
m=A=0,g=3*v);arr_n=[];arr_c=[];arr_b=[];c_len=0;c_cid=-1;$color_wrapper_main.innerHTML="";$color_wrappers=[];$color_spans=[];$color_inputs_n=[];$color_inputs_c=[]},U=function(b){window.c_len=-1!==b?b.length:0;window.arr_n=[];window.arr_c=[];window.arr_b=[];for(a=0;a<c_len;a++)arr_n[a]=b[a][0],arr_c[a]=b[a][1];window.arr_n_restore=arr_n.slice();window.arr_c_restore=arr_c.slice();window.c_len_restore=c_len;c_cid>c_len-1&&(c_cid=-1)},Ea=function(a){window.arr_p=a[0];window.p_len=a[1];window.p_cid=a[2]},
K=acquireVsCodeApi(),w=!1,l=0,v=0,m=l=0,g=0,A=-1,B=0,ja=0,Ba=0,e=[],h=0,xa=!1,b=null,a=0,za=!0;window.addEventListener("message",function(b){var c=b.data;switch(c.command){case "init":var e=function(){var b=c.arr_settings;window.mode_current=b[0];window.sort_mode="edit-sort"===mode_current?!0:!1;window.convert_mode="edit-convert"===mode_current?!0:!1;window.c_cid=b[1];window.filter_open=b[2];window.filter_val=b[3];window.picker_mode=c.picker_mode;window.picker_color=c.picker_color;window.obj_css_colors_lowercase=
{};b=Object.getOwnPropertyNames(ma);for(a=0;149>a;a++)obj_css_colors_lowercase[b[a].toLowerCase()]=ma[b[a]];Ea(c.arr_p_l_c);U(c.arr_n_c);Xa();window.$check_gradient_dummy=document.createElement("div");document.body.appendChild($check_gradient_dummy);F(0,c_len);$main_wrapper.className=mode_current;document.body.appendChild($main_wrapper);0!==picker_mode&&Ma(picker_color);window.statusbar_height=$statusbar.clientHeight;0!==c_len?1===filter_open?(filter_open=0,""!==filter_val&&($filter_input.value=filter_val),
R(!1),"insert-floatview"!==mode_current&&200<c_len&&H(),ia()):(Q(),"insert-floatview"!==mode_current&&200<c_len&&T()):Q();Aa();window.addEventListener("resize",Za,!1);document.addEventListener("keypress",ya,!1);za=!1},d=function(){window.window_height=window.innerHeight;window.window_width=window.innerWidth;1>window_height&&100>g?setTimeout(function(){g++;d()},10):e()},g=0;d();break;case "refresh":S();U(c.arr_n_c);if(0<c_len){F(0,c_len);if("insert-floatview"!==mode_current)200<c_len&&T();else for(a=
0;a<c_len;a++)$color_wrappers[a].title=arr_n[a]===arr_c[a]?arr_n[a]:arr_n[a]+": "+arr_c[a];1===filter_open&&""!==filter_val&&ia()}break;case "add_palette_success":Ea(c.arr_p_l_c);pm_create_listwrappers(p_len-1,p_len,!0);$dropdown_input.value=arr_p[p_cid];!1!==c.arr_return&&("no-palettes"===mode_current&&(mode_current="edit",document.body.className=mode_current),1===filter_open&&R(!1),S(),U(c.arr_return),F(0,c_len),"insert-floatview"!==mode_current&&200<c_len&&T());break;case "save_palette_success":arr_n_restore=
arr_n.slice();arr_c_restore=arr_c.slice();c_len_restore=c_len;break;case "rename_palette_success":Ea(c.arr_p_l_c);$dropdown_input.value=arr_p[p_cid];break;case "delete_palette_success":b=function(){arr_p.splice(pm_remove_list_wrapper_id,1);p_len--;for(a=0;a<p_len;a++)$pm_list_wrappers[a].t_id=a};$pm_list_wrapper_main.removeChild($pm_list_wrappers[pm_remove_list_wrapper_id]);$pm_list_wrappers.splice(pm_remove_list_wrapper_id,1);pm_remove_list_wrapper_id=-1;!0===c.arr_n_c?b():(1===filter_open&&R(!1),
-2===c.arr_n_c?(arr_p=[],p_cid=-1,p_len=0,S(),$dropdown_input.value="",mode_current="no-palettes",document.body.className=mode_current):(b(),p_cid=0,S(),-1!==c.arr_n_c&&(U(c.arr_n_c),F(0,c_len),"insert-floatview"!==mode_current&&200<c_len&&T(),$dropdown_input.value=arr_p[p_cid])));break;case "ext_open_picker":Na(1,c.picker_color)}})})();